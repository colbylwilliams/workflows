name: do stuff

on:
  create:
  delete:
  push:
  pull_request:
    types: [closed, synchronize, opened, reopened]

jobs:
  env_config:
    uses: ./.github/workflows/env_config.yml
    secrets: inherit

  do_stuff:
    name: Do stuff
    needs: env_config
    runs-on: ubuntu-latest
    environment:
      name: ${{ needs.env_config.outputs.type }}
      url: https://portal.azure.com/#@DDCET.onmicrosoft.com/resource/subscriptions/b6de8d3f-8477-45fe-8d60-f30c6db2cb06/resourceGroups/TeamCloud-Reset

    steps:
      - run: echo github.event_name _____ ${{ github.event_name }}
      - run: echo github.event.ref _____ ${{ github.event.ref }}
      - run: echo github.event.pull_request.base.ref _____ ${{ github.event.pull_request.base.ref }}
      - run: echo github.event.ref_type _____ ${{ github.event.ref_type }}

      - run: echo "- ${{ needs.env_config.outputs.name }}" >> $GITHUB_STEP_SUMMARY
      - run: echo "- ${{ needs.env_config.outputs.type }}" >> $GITHUB_STEP_SUMMARY
