name: do stuff

on:
  create:
  delete:
  push:
  pull_request:
    types: [closed, synchronize, opened, reopened]

jobs:
  env_config:
    uses: ./.github/workflows/env_config.yml
    secrets: inherit

  do_stuff:
    name: Do stuff
    needs: env_config
    runs-on: ubuntu-latest
    environment: needs.env_config.outputs.type

    steps:
      - run: echo github.event_name _____ ${{ github.event_name }}
      - run: echo github.event.ref _____ ${{ github.event.ref }}
      - run: echo github.event.pull_request.base.ref _____ ${{ github.event.pull_request.base.ref }}
      - run: echo github.event.ref_type _____ ${{ github.event.ref_type }}

      - run: echo "- ${{ needs.env_config.outputs.name }}" >> $GITHUB_STEP_SUMMARY
      - run: echo "- ${{ needs.env_config.outputs.type }}" >> $GITHUB_STEP_SUMMARY
      - run: echo "- ${{ needs.env_config.outputs.project_name }}" >> $GITHUB_STEP_SUMMARY
      - run: echo "- ${{ needs.env_config.outputs.project_group }}" >> $GITHUB_STEP_SUMMARY
